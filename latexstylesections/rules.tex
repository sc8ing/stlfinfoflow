\documentclass[12pt]{article} \usepackage{bussproofs}
\usepackage{amssymb} \usepackage{latexsym}

% This is the "centered" symbol
\def\fCenter{{\mbox{\Large$\rightarrow$}}}

% Optional to turn on the short abbreviations
\EnableBpAbbreviations

% \alwaysRootAtTop  % makes proofs upside down
% \alwaysRootAtBottom % -- this is the default setting

\begin{document}
\thispagestyle{empty}

%%%%%%%%%%%%%%%%%%%%% values %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{prooftree}
   \AxiomC{}
\RightLabel{(v\_abs)}
    \UnaryInfC{value (abs x T body)}
\end{prooftree}

\begin{prooftree}
   \AxiomC{}
\RightLabel{(v\_tru)}
    \UnaryInfC{value tru}
\end{prooftree}

\begin{prooftree}
   \AxiomC{}
\RightLabel{(v\_fls)}
    \UnaryInfC{value fls}
\end{prooftree}

\begin{prooftree}
   \AxiomC{value val}
\RightLabel{(v\_markedval)}
    \UnaryInfC{value (marked class val)}
\end{prooftree}





%%%%%%%%%%%%%%%%%%%%% substitutions %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{prooftree}
    \AxiomC{}
    \RightLabel{(s\_var\_eq)}
    \UnaryInfC{[v // x] (var x) is s}
\end{prooftree}

\begin{prooftree}
    \AxiomC{y $\neq$ x}
    \RightLabel{(s\_var\_neq)}
    \UnaryInfC{[v // x] (var y) is (var y)}
\end{prooftree}

\begin{prooftree}
    \AxiomC{}
    \RightLabel{(s\_abs\_eq)}
    \UnaryInfC{[v // x] (abs x T body) is (abs x T body)}
\end{prooftree}

\begin{prooftree}
    \AxiomC{x $\neq$ y}
    \AxiomC{[v // x] body is body'}
    \RightLabel{(s\_abs\_neq)}
    \BinaryInfC{[v // x] (abs y T body) is (abs y T body')}
\end{prooftree}

\begin{prooftree}
    \AxiomC{[v // x] body is body'}
    \AxiomC{[v // x] arg is arg'}
    \RightLabel{(s\_app)}
    \BinaryInfC{[v // x] (app body arg) is (app body' arg')}
\end{prooftree}

\begin{prooftree}
    \AxiomC{}
    \RightLabel{(s\_tru)}
    \UnaryInfC{[v // x] tru is tru}
\end{prooftree}

\begin{prooftree}
    \AxiomC{}
    \RightLabel{(s\_fls)}
    \UnaryInfC{[v // x] fls is fls}
\end{prooftree}

\begin{prooftree}
    \AxiomC{[v // x] cond is cond'}
    \AxiomC{[v // x] b1 is b1'}
    \AxiomC{[v // x] b2 is b2'}
    \RightLabel{(s\_test)}
    \TrinaryInfC{[v // x] (test cond b1 b2) is (test cond' b1' b2')}
\end{prooftree}

\begin{prooftree}
    \AxiomC{[v // x] body is body'}
    \RightLabel{(s\_marked)}
    \UnaryInfC{[v // x] (marked class body) is (marked class body')}
\end{prooftree}





%%%%%%%%%%%%%%%%%%%%% smallstep %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{prooftree}
    \AxiomC{[arg // x] body is subres}
    \RightLabel{(ST\_AppAbs)}
    \UnaryInfC{app (abs x T body) arg $\texttt{-->}$ subres}
\end{prooftree}

\begin{prooftree}
    \AxiomC{body \texttt{-->} body'}
    \RightLabel{(ST\_App1)}
    \UnaryInfC{app body arg \texttt{-->} app body' arg}
\end{prooftree}

\begin{prooftree}
    \AxiomC{}
    \RightLabel{(ST\_TestTru)}
    \UnaryInfC{test tru b1 b2 \texttt{-->} b1}
\end{prooftree}

\begin{prooftree}
    \AxiomC{}
    \RightLabel{(ST\_TestFls)}
    \UnaryInfC{test fls b1 b2 \texttt{-->} b2}
\end{prooftree}

\begin{prooftree}
    \AxiomC{cond \texttt{-->} cond'}
    \RightLabel{(ST\_Test)}
    \UnaryInfC{test cond b1 b2 \texttt{-->} test cond' b1 b2}
\end{prooftree}

\begin{prooftree}
    \AxiomC{}
    \RightLabel{(ST\_LiftApp)}
    \UnaryInfC{app (marked class body) arg \texttt{-->} marked class (app body arg)}
\end{prooftree}

\begin{prooftree}
    \AxiomC{}
    \RightLabel{(ST\_LiftTestCond)}
    \UnaryInfC{test (marked class cond) b1 b2 \texttt{-->} marked class (test cond b1 b2)}
\end{prooftree}

\begin{prooftree}
    \AxiomC{body \texttt{-->} body'}
    \RightLabel{(ST\_MarkReduce)}
    \UnaryInfC{marked class body \texttt{-->} marked class body'}
\end{prooftree}





%%%%%%%%%%%%%%%%%%%%% typing %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{prooftree}
    \AxiomC{$\Gamma(x) =$ T}
    \RightLabel{(T\_Var)}
    \UnaryInfC{$\Gamma\vdash$ var x : T}
\end{prooftree}

\begin{prooftree}
    \AxiomC{$\Gamma[\texttt{"x"}:=$T11$](e) \vdash$ t12 : T12}
    \RightLabel{(T\_Abs)}
    \UnaryInfC{$\Gamma\vdash$ abs x T11 t12 : Arrow T11 T12}
\end{prooftree}

\begin{prooftree}
    \AxiomC{$\Gamma\vdash$body : Arrow T11 T12}
    \AxiomC{$\Gamma\vdash$arg : T11}
    \RightLabel{(T\_App)}
    \BinaryInfC{$\Gamma\vdash$ app body arg : T12}
\end{prooftree}

\begin{prooftree}
    \AxiomC{}
    \RightLabel{(T\_Tru)}
    \UnaryInfC{$\Gamma\vdash$ tru : Bool}
\end{prooftree}

\begin{prooftree}
    \AxiomC{}
    \RightLabel{(T\_Fls)}
    \UnaryInfC{$\Gamma\vdash$ fls : Bool}
\end{prooftree}

\begin{prooftree}
    \AxiomC{$\Gamma\vdash$cond : Bool}
    \AxiomC{$\Gamma\vdash$b1 : T}
    \AxiomC{$\Gamma\vdash$b2 : T}
    \RightLabel{(T\_Test)}
    \TrinaryInfC{$\Gamma\vdash$ test cond b1 b2 : T}
\end{prooftree}

\begin{prooftree}
    \AxiomC{$\Gamma\vdash$body : T}
    \RightLabel{(T\_Marked)}
    \UnaryInfC{$\Gamma\vdash$ marked class body : T}
\end{prooftree}





%%%%%%%%%%%%%%%%%%%%%%%% holier relation %%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{prooftree}
    \AxiomC{}
    \RightLabel{(H\_refl)}
    \UnaryInfC{e \texttt{<<} e}
\end{prooftree}

\begin{prooftree}
    \AxiomC{}
    \RightLabel{(H\_hole)}
    \UnaryInfC{hole \texttt{<<} e}
\end{prooftree}

\begin{prooftree}
    \AxiomC{body \texttt{<<} body'}
    \AxiomC{arg \texttt{<<} arg'}
    \RightLabel{(H\_app)}
    \BinaryInfC{app body arg \texttt{<<} app body' arg'}
\end{prooftree}

\begin{prooftree}
    \AxiomC{body \texttt{<<} body'}
    \RightLabel{(H\_abs)}
    \UnaryInfC{abs x T body \texttt{<<} abs x T body'}
\end{prooftree}

\begin{prooftree}
    \AxiomC{cond \texttt{<<} cond'}
    \AxiomC{b1 \texttt{<<} b1'}
    \AxiomC{b2 \texttt{<<} b2'}
    \RightLabel{(H\_test)}
    \TrinaryInfC{test cond b1 b2 \texttt{<<} test cond' b1' b2'}
\end{prooftree}

\begin{prooftree}
    \AxiomC{body \texttt{<<} body'}
    \RightLabel{(H\_marked)}
    \UnaryInfC{marked class body \texttt{<<} marked class body'}
\end{prooftree}





%%%%%%%%%%%%%%%%%%%%%%%% pruning %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand\prune[1]{
    \textbackslash\textbackslash #1//
}

\begin{prooftree}
    \AxiomC{\prune{body} = body'}
    \AxiomC{\prune{arg} = arg'}
    \RightLabel{(P\_app)}
    \BinaryInfC{\prune{app body arg} = app body' arg'}
\end{prooftree}

\begin{prooftree}
    \AxiomC{\prune{body} = body'}
    \RightLabel{(P\_abs)}
    \UnaryInfC{\prune{abs x T body} = abs x T body'}
\end{prooftree}

\begin{prooftree}
    \AxiomC{\prune{cond} = cond'}
    \AxiomC{\prune{b1} = b1'}
    \AxiomC{\prune{b2} = b2'}
    \RightLabel{(P\_test)}
    \TrinaryInfC{\prune{test cond b1 b2} = test cond' b1' b2'}
\end{prooftree}

\begin{prooftree}
    \AxiomC{class = lab}
    \AxiomC{\prune{body}\_[lab] = body'}
    \RightLabel{(P\_marked\_eq)}
    \BinaryInfC{\prune{marked class body}\_[lab] = hole}
\end{prooftree}

\begin{prooftree}
    \AxiomC{class $\neq$ lab}
    \AxiomC{\prune{body}\_[lab] = body'}
    \RightLabel{(P\_marked\_neq)}
    \BinaryInfC{\prune{marked class body}\_[lab] = marked class body'}
\end{prooftree}

\begin{prooftree}
    \AxiomC{value v}
    \RightLabel{(P\_val)}
    \UnaryInfC{\prune{v} = v}
\end{prooftree}

\end{document}
